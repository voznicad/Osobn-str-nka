<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/png" href="./assets/icons/favicon.png">
  <link rel="apple-touch-icon" href="./assets/icons/favicon.png">
  <title>Škola – David Voznica — Osobní stránka</title>
  <meta name="description" content="Osobní stránka Davida Voznici ve stylu Apple iOS." />
  <style>
    :root{
      --bg: #0b0c0f;
      --card: rgba(255,255,255,0.08);
      --text: #e9ecf1;
      --muted: #a9b0ba;
      --tint: #5ac8fa;
      --ring: rgba(90,200,250,0.45);
      --blur: saturate(180%) blur(12px);
      --shadow: 0 10px 30px rgba(0,0,0,0.35);
      --radius: 22px;
    }
    .light{
      --bg: #f2f4f8;
      --card: rgba(255,255,255,0.6);
      --text: #0b0c0f;
      --muted: #60656f;
      --tint: #007aff;
      --ring: rgba(0,122,255,0.35);
      --shadow: 0 10px 28px rgba(0,0,0,0.10);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background: radial-gradient(1200px 800px at 80% -10%, rgba(0,122,255,0.25), transparent 60%),
                  radial-gradient(900px 700px at -10% 100%, rgba(88,86,214,0.25), transparent 60%), var(--bg);
      color: var(--text); transition: background .3s ease, color .3s ease;
    }
    .container{max-width:1080px;margin:0 auto;padding:24px}
    header{position:sticky; top:0; z-index:10; backdrop-filter:var(--blur); -webkit-backdrop-filter:var(--blur);
      background: linear-gradient(to bottom, rgba(255,255,255,0.08), transparent); border-bottom: 1px solid rgba(255,255,255,0.08);}
    .statusbar{display:flex; align-items:center; justify-content:space-between; padding:14px 24px}
    .pill{display:inline-flex; align-items:center; gap:10px; background: var(--card);
      border:1px solid rgba(255,255,255,0.10); border-radius:999px; padding:10px 14px; box-shadow: var(--shadow);
      backdrop-filter:var(--blur); -webkit-backdrop-filter:var(--blur);}
    .toggle{display:flex; align-items:center; gap:10px; cursor:pointer; user-select:none;}
    .switch{width:52px;height:30px;border-radius:999px;background:rgba(255,255,255,0.25);
      position:relative;border:1px solid rgba(0,0,0,0.2); transition: background .2s ease;}
    .thumb{width:26px;height:26px;border-radius:50%; background:white; position:absolute; top:1px; left:1px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.25); transition:left .2s ease;}
    body.light .switch{background:rgba(0,122,255,0.25)}
    body.light .thumb{left:25px}
    main{display:grid; grid-template-columns: 1fr; gap:24px; padding:24px}
    @media(min-width:900px){ main{grid-template-columns: 360px 1fr;} }
    .card{background: var(--card); border:1px solid rgba(255,255,255,0.12); border-radius: var(--radius);
      padding: 22px; box-shadow: var(--shadow); backdrop-filter: var(--blur); -webkit-backdrop-filter: var(--blur);}
    /* HERO avatar */
    
    /* Apple-style blue glow for avatar */
    .avatar{
      position:relative;
      width:120px; height:120px;
      border-radius:26px; overflow:hidden;
      background:rgba(255,255,255,0.6);
      box-shadow:
        0 0 12px rgba(0,122,255,0.4),
        0 0 24px rgba(0,122,255,0.3),
        0 0 48px rgba(0,122,255,0.2);
      border:2px solid rgba(0,122,255,0.6);
      backdrop-filter:blur(8px) saturate(160%);
      -webkit-backdrop-filter:blur(8px) saturate(160%);
      transition:box-shadow .5s ease;
    }
    .avatar:hover{
      box-shadow:
        0 0 20px rgba(0,122,255,0.6),
        0 0 40px rgba(0,122,255,0.4),
        0 0 60px rgba(0,122,255,0.25);
    }

    .avatar-rotator{position:relative; width:120px; height:120px; border-radius:26px; overflow:hidden;}
    .avatar-rotator img{position:absolute; inset:0; width:100%; height:100%; object-fit:cover; transition: opacity .45s ease}
    .avatar-rotator img.hidden{opacity:0}
    .hero h1{margin:16px 0 6px; font-size:28px}
    .hero p{margin:6px 0; color: var(--muted)}
    .badges{display:flex;flex-wrap:wrap; gap:8px; margin-top:12px}
    .badge{padding:8px 12px; border-radius:999px; border:1px solid rgba(255,255,255,0.2); background:rgba(255,255,255,0.1); font-size:13px;}
    .section-title{display:flex; align-items:center; justify-content:space-between; margin:0 0 12px}
    .section-title h2{margin:0; font-size:20px}
    .list{display:flex; flex-direction:column; gap:14px}
    .list-item{display:flex; gap:12px}
    .list-item .dot{width:10px;height:10px;border-radius:50%;background:var(--tint);margin-top:8px}
    .kv{display:grid; grid-template-columns: 110px 1fr; gap:6px 12px; margin-top:12px}
    .kv div{padding:6px 0; border-bottom: 1px dashed rgba(255,255,255,0.12)}
    .projects{display:grid; grid-template-columns:1fr; gap:16px}
    @media(min-width:700px){ .projects{grid-template-columns: repeat(2, 1fr);} }
    @media(min-width:1100px){ .projects{grid-template-columns: repeat(3, 1fr);} }
    .project{display:flex; flex-direction:column; gap:10px; border-radius:16px; padding:16px;
      border:1px solid rgba(255,255,255,0.12); background: linear-gradient(180deg, rgba(255,255,255,0.15), rgba(255,255,255,0.06));}
    .project h3{margin:0 0 4px; font-size:16px}
    .project p{margin:0; color: var(--muted); font-size:14px}
    .tags{display:flex; gap:8px; flex-wrap:wrap; margin-top:6px}
    .tag{font-size:12px; padding:6px 10px; border-radius:999px; border:1px solid rgba(255,255,255,0.2); background:rgba(255,255,255,0.1)}
    .cta{display:inline-flex; align-items:center; gap:10px; padding:12px 16px; border-radius:14px;
      background: linear-gradient(180deg, var(--tint), #34c7f3); color:white; text-decoration:none; font-weight:600;
      box-shadow: 0 10px 24px rgba(0,122,255,0.35); border:0;}
    footer{padding:24px; text-align:center; color:var(--muted)}
    a{color:var(--tint)}
  
    /* Education layout tweaks */
    #vzdelani .list{gap:18px}
    #vzdelani .list-item{align-items:flex-start; padding:6px 0}
    #vzdelani .list-item .dot{width:10px;height:10px;border-radius:50%;align-self: center;background:var(--tint);margin-top:6px}
    .edu-title{font-weight:700; font-size:16px; line-height:1.25}
    .edu-meta{color: var(--muted); font-size:14px; margin-top:2px; line-height:1.35}

    /* Education one-line layout */
    #vzdelani .list{gap:14px}
    #vzdelani .list-item{display:flex; align-items:center; gap:10px; padding:6px 0; white-space:nowrap}
    #vzdelani .dot{width:8px;height:8px;border-radius:50%;background:var(--tint); flex:0 0 auto}
    .edu-row{display:flex; align-items:baseline; gap:10px; white-space:nowrap}
    .edu-school{font-weight:700; font-size:16px}
    .edu-years{color: var(--muted); font-size:15px}
    .edu-obor{color: var(--muted); font-size:15px}
    /* Allow wrap on very small screens */
    @media (max-width: 560px){
      #vzdelani .list-item, .edu-row{white-space:normal}
    }

    /* Education full-width across grid */
    #vzdelani{ grid-column: 1 / -1; }
    /* Single-line look with natural wrapping when needed */
    #vzdelani .list{gap:18px}
    #vzdelani .list-item{display:flex; align-items:center; gap:12px; padding:8px 0}
    #vzdelani .dot{width:10px;height:10px;border-radius:50%;background:var(--tint); flex:0 0 auto; margin-top:2px}
    .edu-row{display:flex; align-items:baseline; gap:10px; flex-wrap:wrap}
    .edu-school{font-weight:700; font-size:17px}
    .edu-obor, .edu-years{color: var(--muted); font-size:15px}

  
    /* Projects section full width and card styling */
    #projekty{ grid-column: 1 / -1; }
    #projekty .projects{display:grid; grid-template-columns:1fr; gap:20px}
    #projekty .proj-card{
      background: var(--card);
      border:1px solid rgba(255,255,255,0.15);
      border-radius: var(--radius);
      padding:20px 22px;
      box-shadow: var(--shadow);
      backdrop-filter:var(--blur);
      -webkit-backdrop-filter:var(--blur);
      transition: transform .2s ease, box-shadow .2s ease;
    }
    #projekty .proj-card:hover{
      transform:translateY(-4px);
      box-shadow:0 8px 30px rgba(0,0,0,0.25);
    }
    #projekty .proj-card h3{margin:0 0 6px; font-size:18px}
    #projekty .proj-card p{margin:0 0 8px; color:var(--muted)}
    #projekty .proj-card a{color:var(--tint); text-decoration:none; font-weight:600}

  
    #vzdelani{ margin-bottom: 40px; }
  
    /* Canonical Education styling */
    #vzdelani{ grid-column: 1 / -1; margin-bottom: 40px; }
    #vzdelani .list{gap:16px}
    #vzdelani .list-item{display:flex; align-items:center; gap:10px}
    #vzdelani .dot{width:10px;height:10px;border-radius:50%;background:var(--tint)}
    #vzdelani .edu-line{display:flex; gap:12px; align-items:baseline; flex-wrap:wrap}
    #vzdelani .edu-school{font-weight:700}
    #vzdelani .edu-years, #vzdelani .edu-obor{color:var(--muted)}

  
    .cta.green{
      background: linear-gradient(180deg, #34c759, #28cd41);
      box-shadow: 0 10px 24px rgba(52,199,89,0.35);
      color: white !important;
    }
  
    /* iOS-style theme switch */
    .ios-toggle{display:flex; align-items:center; gap:10px}
    #themeSwitch{position:absolute; opacity:0; width:0; height:0}
    .ios-switch{
      width:52px; height:30px; border-radius:999px; position:relative; display:inline-block;
      background:rgba(255,255,255,0.25); border:1px solid rgba(0,0,0,0.15);
      box-shadow: inset 0 2px 6px rgba(0,0,0,0.15);
      transition: background .25s ease, border-color .25s ease, box-shadow .25s ease;
    }
    .ios-switch .knob{
      position:absolute; top:1px; left:1px; width:26px; height:26px; border-radius:50%;
      background:#fff; box-shadow: 0 3px 8px rgba(0,0,0,0.25), inset 0 -1px 1px rgba(0,0,0,0.08);
      transition:left .25s ease;
    }
    #themeSwitch:checked + .ios-switch{
      background: rgba(0,122,255,0.35);
      border-color: rgba(0,122,255,0.45);
      box-shadow: inset 0 2px 10px rgba(0,122,255,0.35);
    }
    #themeSwitch:checked + .ios-switch .knob{ left:25px; }

  
    /* iOS-style theme switch */
    .ios-toggle{display:flex; align-items:center; gap:10px}
    #themeSwitch{position:absolute; opacity:0; width:0; height:0}
    .ios-switch{
      width:52px; height:30px; border-radius:999px; position:relative; display:inline-block;
      background:rgba(255,255,255,0.25); border:1px solid rgba(0,0,0,0.15);
      box-shadow: inset 0 2px 6px rgba(0,0,0,0.15);
      transition: background .25s ease, border-color .25s ease, box-shadow .25s ease;
    }
    .ios-switch .knob{
      position:absolute; top:1px; left:1px; width:26px; height:26px; border-radius:50%;
      background:#fff; box-shadow: 0 3px 8px rgba(0,0,0,0.25), inset 0 -1px 1px rgba(0,0,0,0.08);
      transition:left .25s ease;
    }
    #themeSwitch:checked + .ios-switch{
      background: rgba(0,122,255,0.35);
      border-color: rgba(0,122,255,0.45);
      box-shadow: inset 0 2px 10px rgba(0,122,255,0.35);
    }
    #themeSwitch:checked + .ios-switch .knob{ left:25px; }

    /* Fade animation on theme change */
    body.theme-fade{ transition: background .35s ease, color .35s ease; }

  
    /* Place iOS switch left next to location text */
    .statusbar{display:flex; justify-content:space-between; align-items:center}
    .statusbar-left{display:flex; align-items:center; gap:8px}
    .ios-switch{transform:scale(0.9); margin-left:4px;}

  
    .ios-icon{opacity:1!important; width:22px;height:22px;object-fit:contain;display:inline-block;vertical-align:middle;opacity:.95;margin:0 4px}
    .statusbar-left{display:flex;align-items:center;gap:10px}
  
  /* v29 polish */
  html{ scroll-behavior: smooth; }
  /* glassy statusbar */
  header .statusbar-wrap{
    position: sticky; top: 10px; z-index: 50;
    background: rgba(255,255,255,0.35);
    border: 1px solid rgba(255,255,255,0.3);
    border-radius: 999px;
    padding: 6px 10px;
    backdrop-filter: blur(12px) saturate(150%);
    -webkit-backdrop-filter: blur(12px) saturate(150%);
    box-shadow: 0 10px 30px rgba(0,0,0,0.06);
  }
  body:not(.light) header .statusbar-wrap{
    background: rgba(20,20,25,0.35);
    border-color: rgba(255,255,255,0.06);
  }
  /* micro-animations on cards */
  .card{ opacity: 0; transform: translateY(12px); animation: fadeUp .6s ease forwards; }
  .card:nth-of-type(1){ animation-delay: .05s }
  .card:nth-of-type(2){ animation-delay: .12s }
  .card:nth-of-type(3){ animation-delay: .18s }
  .card:nth-of-type(4){ animation-delay: .24s }
  @keyframes fadeUp{
    to{ opacity:1; transform:none }
  }
  /* pulsing glow on switch when toggled */
  .ios-switch:active .knob{ box-shadow: 0 0 12px rgba(0,122,255,.6); }
  /* gradient transition for page background */
  body, .bg{ transition: background .35s ease, background-image .35s ease; }
  /* copy email helper */
  .copy-link{ font-size: 13px; color: var(--muted); text-decoration: none; margin-left: 8px }
  .copy-link.ok{ color: var(--tint); font-weight: 600 }

  
  /* Top nav tabs */
  nav.tabs{display:flex; gap:10px; margin:14px 0 0; justify-content:center}
  nav.tabs a{padding:10px 14px; border-radius:999px; background:var(--card);
    border:1px solid rgba(255,255,255,0.15); text-decoration:none; color:inherit;
    box-shadow: var(--shadow); backdrop-filter: var(--blur); -webkit-backdrop-filter: var(--blur);
    transition:transform .2s ease, box-shadow .2s ease, background .2s ease}
  nav.tabs a:hover{transform:translateY(-2px); box-shadow:0 10px 24px rgba(0,0,0,.18)}
  nav.tabs a.active{background: rgba(0,122,255,.15); border-color: rgba(0,122,255,.35);}
  main{margin-top:10px}

  </style>

<style>
/* ---- Rozvrh (slot grid, non-overlap) ---- */
.timetable{
  --cols: 12;
  --laneH: 64px;      /* výška jedné dráhy (řádku) */
  background: var(--card, rgba(255,255,255,.55));
  border-radius: 18px;
  box-shadow: var(--shadow);
  padding: 8px;
}
.tt-table{ display:grid; grid-template-columns:120px 1fr; gap:8px }
.tt-head{ grid-column:1/-1; display:grid; grid-template-columns:120px repeat(var(--cols), minmax(88px,1fr)); gap:8px }
.tt-th{ background:rgba(127,127,127,.12); border-radius:10px; text-align:center; padding:10px 6px; font-weight:800 }
.tt-th .sub{ display:block; font-weight:700; opacity:.85 }
.tt-day{ display:flex; align-items:center; font-weight:900; font-size:22px; background:rgba(127,127,127,.14); border-radius:12px; padding-left:12px }
.row-track{
  position:relative;
  display:grid;
  grid-template-columns: repeat(var(--cols), minmax(88px,1fr));
  grid-auto-rows: var(--laneH);
  grid-auto-flow: dense;
  gap:8px;
  border-radius:12px;
  outline:1px solid rgba(127,127,127,.2);
  padding:8px;
  background:transparent;
}
.event{
  border-radius:12px; border:3px solid;
  display:flex; align-items:center; justify-content:center; text-align:center; font-weight:800;
  padding:6px 8px;
  min-height: var(--laneH);
}
.event.red{ color:#d01a1a; border-color:#d01a1a; background:rgba(208,26,26,.06) }
.event.blue{ color:#155bb8; border-color:#155bb8; background:rgba(21,91,184,.06) }

.segwrap{display:flex; gap:6px; margin-bottom:8px}
.hidden{ display:none !important }

body:not(.light) .timetable{ --card: rgba(28,28,30,.45) }
@media (max-width: 980px){
  .tt-table{ grid-template-columns:90px 1fr }
  .tt-head{ grid-template-columns:90px repeat(var(--cols), 1fr) }
  .tt-th{ font-size:12px }
  .event{
  border-radius:12px; border:3px solid;
  display:flex; align-items:center; justify-content:center; text-align:center; font-weight:800;
  padding:6px 8px;
  min-height: var(--laneH);
}
}
</style>

</head>
<body>
  <header>
    <div class="statusbar statusbar-wrap">
      <div class="statusbar-left">
        <span class="pill">📍 Čejč • Brno • Ostrava, Česká republika</span>
        <img class="ios-icon theme-icon" alt="Tmavý režim" 
             src="assets/měsíc_černý.png" 
             data-light="assets/měsíc_černý.png" 
             data-dark="assets/měsíc_bílí.png" aria-hidden="true">
        <input type="checkbox" id="themeSwitch" aria-label="Přepnout motiv">
        <label for="themeSwitch" class="ios-switch"><span class="knob"></span></label>
        <img class="ios-icon theme-icon" alt="Světlý režim" 
             src="assets/slunce_černý.png" 
             data-light="assets/slunce_černý.png" 
             data-dark="assets/slunce_bílí.png" aria-hidden="true">
</div>
    </div>
      
    </div>
  </header>
  
    <nav class="tabs">
      <a href="index.html">Úvod</a>
      <a href="blog.html">Moje fotky</a>
      <a href="skola.html" class="active">Škola</a>
    </nav>

<!-- 📅 Rozvrh (iOS style) -->

<section class="card" style="grid-column:1 / -1" id="rozvrh">
  <div class="section-title">
    <h2>📅 Rozvrh</h2>
  </div>

  <div class="timetable">
    <div class="segwrap">
      <div class="segmented" role="tablist" aria-label="Týden">
        <button class="seg active" data-view="even" role="tab" aria-selected="true">sudý</button>
        <button class="seg" data-view="odd" role="tab">lichý</button>
      </div>
    </div>

    <!-- Sudý týden -->
    <div class="tt-table" id="tt-even">
      <div class="tt-head">
        <div></div>
        <div class="tt-th">7:15 - 8:00 <span class="sub">8:00</span></div>
        <div class="tt-th">8:00 - 8:45 <span class="sub">8:45</span></div>
        <div class="tt-th">9:00 - 9:45 <span class="sub">9:45</span></div>
        <div class="tt-th">9:45 - 10:30 <span class="sub">10:30</span></div>
        <div class="tt-th">10:45 - 11:30 <span class="sub">11:30</span></div>
        <div class="tt-th">11:30 - 12:15 <span class="sub">12:15</span></div>
        <div class="tt-th">12:30 - 13:15 <span class="sub">13:15</span></div>
        <div class="tt-th">13:15 - 14:00 <span class="sub">14:00</span></div>
        <div class="tt-th">14:15 - 15:00 <span class="sub">15:00</span></div>
        <div class="tt-th">15:00 - 15:45 <span class="sub">15:45</span></div>
        <div class="tt-th">16:00 - 16:45 <span class="sub">16:45</span></div>
        <div class="tt-th">16:45 - 17:30 <span class="sub">17:30</span></div>
      </div>

      <div class="tt-day">PO</div><div class="row-track" id="even-day-1"></div>
      <div class="tt-day">ÚT</div><div class="row-track" id="even-day-2"></div>
      <div class="tt-day">ST</div><div class="row-track" id="even-day-3"></div>
    </div>

    <!-- Lichý týden -->
    <div class="tt-table hidden" id="tt-odd">
      <div class="tt-head">
        <div></div>
        <div class="tt-th">7:15 - 8:00 <span class="sub">8:00</span></div>
        <div class="tt-th">8:00 - 8:45 <span class="sub">8:45</span></div>
        <div class="tt-th">9:00 - 9:45 <span class="sub">9:45</span></div>
        <div class="tt-th">9:45 - 10:30 <span class="sub">10:30</span></div>
        <div class="tt-th">10:45 - 11:30 <span class="sub">11:30</span></div>
        <div class="tt-th">11:30 - 12:15 <span class="sub">12:15</span></div>
        <div class="tt-th">12:30 - 13:15 <span class="sub">13:15</span></div>
        <div class="tt-th">13:15 - 14:00 <span class="sub">14:00</span></div>
        <div class="tt-th">14:15 - 15:00 <span class="sub">15:00</span></div>
        <div class="tt-th">15:00 - 15:45 <span class="sub">15:45</span></div>
        <div class="tt-th">16:00 - 16:45 <span class="sub">16:45</span></div>
        <div class="tt-th">16:45 - 17:30 <span class="sub">17:30</span></div>
      </div>

      <div class="tt-day">PO</div><div class="row-track" id="odd-day-1"></div>
      <div class="tt-day">ÚT</div><div class="row-track" id="odd-day-2"></div>
      <div class="tt-day">ST</div><div class="row-track" id="odd-day-3"></div>
    </div>
  </div>
</section>
    
  <main class="grid">
    <section class="card" id="projekty">
        <div class="section-title">
          <h2>Školní projekty</h2>
          <span class="pill">📚 přehled prací</span>
        </div>

        <div class="projects">
          <div class="proj-card">
            <h3>🧩 Základní škola</h3>
            <p>Trávení volného času v COVID-19</p>
            <a href="https://vsb-my.sharepoint.com/:v:/g/personal/voz0067_vsb_cz/Ebj-ifUpPcBEoetr7DlHeE4BfimJnjUeQ2ql-JV-cDPQFw?nav=eyJyZWZlcnJhbEluZm8iOnsicmVmZXJyYWxBcHAiOiJPbmVEcml2ZUZvckJ1c2luZXNzIiwicmVmZXJyYWxBcHBQbGF0Zm9ybSI6IldlYiIsInJlZmVycmFsTW9kZSI6InZpZXciLCJyZWZlcnJhbFZpZXciOiJNeUZpbGVzTGlua0NvcHkifX0&e=cQtTdi" target="_blank" rel="noopener">Otevřít soubor (SharePoint)</a>
          </div>

          <div class="proj-card">
            <h3>🏫 Střední škola</h3>
            <p>Soustředěná praxe G2–G4</p>
            <a href="assets/Soustredena_praxe_G2-G4.pdf" target="_blank" rel="noopener">Otevřít PDF</a>
          </div>

          <div class="proj-card">
            <h3>🎓 Vysoká škola</h3>
            <p>ZDS – Zapojení Booleových funkcí</p>
            <a href="https://vsb-my.sharepoint.com/:w:/g/personal/voz0067_vsb_cz/ERJr9HiJu_tCrRbwepPQ_cYBkQQ6X7cTzPiO_CoDQwXCkA?e=JrSsKA" target="_blank" rel="noopener">Otevřít projekt </a>
          </div>
        </div>
      </section>

</main>

<!-- theme-fix v28 -->
<script>
(function(){
  const KEY='theme';
  const media = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)');
  const sw = document.getElementById('themeSwitch');

  function updateThemeIcons(){
    const light = document.body.classList.contains('light');
    document.querySelectorAll('.theme-icon').forEach(img => {
      const src = light ? img.dataset.light : img.dataset.dark;
      if (src && img.getAttribute('src') !== src) img.setAttribute('src', src);
      img.style.opacity = '1';
    });
  }

  function apply(light, persist){
    document.body.classList.toggle('light', !!light);
    if (sw) sw.checked = !!light;
    try { if (persist) localStorage.setItem(KEY, light?'light':'dark'); } catch(e){}
    updateThemeIcons();
  }

  function init(){
    let saved=null;
    try{ saved = localStorage.getItem(KEY);}catch(e){}
    if (saved==='light' || saved==='dark'){
      apply(saved==='light', false);
    } else {
      const light = media ? !media.matches : true;
      apply(light, false);
    }
  }

  if (sw){ sw.addEventListener('change', ()=>apply(sw.checked, true)); }
  if (media){
    media.addEventListener('change', e=>{
      let saved=null; try{ saved = localStorage.getItem(KEY);}catch(ex){}
      if (saved!=='light' && saved!=='dark'){ apply(!e.matches, false); }
    });
  }

  document.addEventListener('DOMContentLoaded', init);
})();
</script>


<script>
const events = [
  { day:2, start:"07:15", end:"08:45", title:"ULM", teacher:"M. Menšík", room:"POREC1, PORUA1 • P/01", track:"red",  week:"both" },
  { day:2, start:"09:00", end:"10:30", title:"UPR", teacher:"J. Gaura",  room:"POREC1, PORUA1 • P/01", track:"red",  week:"even" },
  { day:2, start:"10:45", end:"12:15", title:"ZDS", teacher:"I. Petříková", room:"POREC1", track:"red", week:"both" },
  { day:2, start:"16:00", end:"17:30", title:"LA",  teacher:"P. Beremlijski", room:"POREC1, PORUA1 • P/01", track:"red", week:"both" },

  { day:3, start:"08:00", end:"09:45", title:"UPR", teacher:"J. Gaura",  room:"POREB208 • C/05", track:"blue", week:"both" },
  { day:3, start:"09:45", end:"11:30", title:"ULM", teacher:"A. Albert", room:"POREB331 • C/10", track:"blue", week:"both" },
  { day:3, start:"13:15", end:"15:00", title:"ZIT", teacher:"M. Radecký", room:"POREC1 • C/03", track:"ind", week:"both" },
  { day:3, start:"15:00", end:"16:45", title:"ZDS", teacher:"F. Malinka, I. Petří…", room:"POREB218 • C/09", track:"ind", week:"both" },
  { day:3, start:"16:45", end:"17:30", title:"A/I-FEI", teacher:"E. Smyčková", room:"PORRV202 • C/27", track:"ind", week:"both" },
];

const MIN = (t)=>{ const [h,m]=t.split(':').map(Number); return h*60+m; };
function positionOf(time){
  const cs = getComputedStyle(document.querySelector('.timetable'));
  const start = parseFloat(cs.getPropertyValue('--start'));
  const end   = parseFloat(cs.getPropertyValue('--end'));
  return (MIN(time) - start)/(end-start);
}
function renderTimetable(filterWeek="both"){
  const wrap = document.querySelector('#rozvrh .timetable');
  const evLayer = document.getElementById('tt-events');
  if (!wrap) return;
  evLayer.innerHTML = "";

  // levý sloupec s časy
  const ticks = ["7:15","8:00","9:00","9:45","10:45","11:30","12:30","13:15","14:15","15:00","16:00","16:45","17:30"];
  let timesCol = wrap.querySelector('.time-col');
  if (!timesCol){
    timesCol = document.createElement('div');
    timesCol.className = 'time-col';
    wrap.insertBefore(timesCol, wrap.querySelector('.now-line'));
  }
  timesCol.innerHTML = ticks.map(t=>`<div class="tick">${t}</div>`).join("");

  // události
  const grid = wrap.getBoundingClientRect();
  const totalHeight = wrap.clientHeight - 48; // od horní hrany day headeru
  events.forEach(ev=>{
    if (filterWeek!=="both" && ev.week!==filterWeek) return;
    const el = document.createElement('div');
    el.className = `event ${ev.track||""}`;

    const colWidth = (wrap.clientWidth - 72 - 8)/5;
    const left = 72 + (ev.day-1)*(colWidth+8);
    const top = 40 + positionOf(ev.start)*totalHeight;
    const height = (positionOf(ev.end)-positionOf(ev.start))*totalHeight;
    Object.assign(el.style, {
      left:`${left}px`, top:`${top}px`, height:`${height}px`, width:`calc((100% - 72px)/5)`
    });
    el.innerHTML = `<h4>${ev.title}</h4>
      <div class="meta">${ev.teacher}</div>
      <div class="meta room">${ev.room}</div>`;
    evLayer.appendChild(el);
  });

  // now-line
  const nowLine = wrap.querySelector('.now-line');
  const now = new Date();
  const day = now.getDay();
  const within = day>=1 && day<=5;
  nowLine.style.display = within ? "block":"none";
  if (within){
    const hh = String(now.getHours()).padStart(2,"0");
    const mm = String(now.getMinutes()).padStart(2,"0");
    const y = 40 + positionOf(`${hh}:${mm}`)*totalHeight;
    nowLine.style.transform = `translateY(${y}px)`;
  }
}
function bindSegments(){
  document.querySelectorAll('#rozvrh .segmented .seg').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      document.querySelectorAll('#rozvrh .seg').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      renderTimetable(btn.dataset.week);
    });
  });
}
window.addEventListener('load', ()=>{ bindSegments(); renderTimetable('both'); });
window.addEventListener('resize', ()=>{
  const active = document.querySelector('#rozvrh .seg.active')?.dataset.week || 'both';
  renderTimetable(active);
});
</script>














<script>
const slots = [
  "7:15-8:00","8:00-8:45","9:00-9:45","9:45-10:30",
  "10:45-11:30","11:30-12:15","12:30-13:15","13:15-14:00",
  "14:15-15:00","15:00-15:45","16:00-16:45","16:45-17:30"
];
const si = s => slots.indexOf(s)+1;

/* ===== SUDÝ ===== */
const even = [
  // PO (přednášky = červeně)
  {day:1, from:"10:45-11:30", to:"11:30-12:15", title:"ZDS — I. Petříková", room:"POREC1", color:"red"},
  {day:1, from:"16:00-16:45", to:"16:45-17:30", title:"LA — P. Beremlijski", room:"POREC1", color:"red"},
  // ÚT (přednášky)
  {day:2, from:"7:15-8:00",  to:"8:00-8:45",  title:"ULM — M. Menšík", room:"POREC1", color:"red"},
  {day:2, from:"9:00-9:45",  to:"9:45-10:30", title:"UPR — J. Gaura", room:"POREC1", color:"red"},
  // ÚT (cvičení)
  {day:2, from:"14:15-15:00", to:"15:00-15:45", title:"ZIT — M. Radecký", room:"", color:"blue"},
  // ST (cvičení = modře)
  {day:3, from:"9:00-9:45",  to:"9:45-10:30", title:"UPR — J. Gaura", room:"POREB208", color:"blue"},
  {day:3, from:"10:45-11:30", to:"11:30-12:15", title:"ULM — A. Albert", room:"POREB331", color:"blue"},
  {day:3, from:"12:30-13:15", to:"13:15-14:00", title:"LA — R. Kalus", room:"PORUA4", color:"blue"},
  {day:3, from:"14:15-15:00", to:"15:00-15:45", title:"ZDS — I. Petříková", room:"POREB218", color:"blue"},
  {day:3, from:"16:00-16:45", to:"16:45-17:30", title:"A/I-FEI — E. Smyčková", room:"PORRV202", color:"blue"},
];

/* ===== LICHÝ ===== */
const odd = [
  // PO
  {day:1, from:"10:45-11:30", to:"11:30-12:15", title:"ZDS — I. Petříková", room:"POREC1", color:"red"},
  {day:1, from:"16:00-16:45", to:"16:45-17:30", title:"LA — P. Beremlijski", room:"POREC1", color:"red"},
  // ÚT (bez UPR 9:00–10:30)
  {day:2, from:"7:15-8:00",  to:"8:00-8:45",  title:"ULM — M. Menšík", room:"POREC1", color:"red"},
  {day:2, from:"14:15-15:00", to:"15:00-15:45", title:"ZIT — M. Radecký", room:"", color:"blue"},
  // ST
  {day:3, from:"9:00-9:45",  to:"9:45-10:30", title:"UPR — J. Gaura", room:"POREB208", color:"blue"},
  {day:3, from:"10:45-11:30", to:"11:30-12:15", title:"ULM — A. Albert", room:"POREB331", color:"blue"},
  {day:3, from:"12:30-13:15", to:"13:15-14:00", title:"LA — R. Kalus", room:"PORUA4", color:"blue"},
  {day:3, from:"14:15-15:00", to:"15:00-15:45", title:"ZDS — I. Petříková", room:"POREB218", color:"blue"},
  {day:3, from:"16:00-16:45", to:"16:45-17:30", title:"A/I-FEI — E. Smyčková", room:"PORRV202", color:"blue"},
];

function packAndRender(dayEl, list){
  dayEl.innerHTML = "";
  list.sort((a,b)=> si(a.from) - si(b.from));
  const lanes = [];
  list.forEach(ev => {
    const s = si(ev.from), e = si(ev.to);
    let lane = 1;
    while(lanes[lane] && lanes[lane] > s) lane++;
    lanes[lane] = e;
    const el = document.createElement("div");
    el.className = "event " + ev.color;
    el.style.gridColumn = `${s} / ${e+1}`;
    el.style.gridRow = `${lane}`;
    el.innerHTML = `<div>${ev.title}</div><div>${ev.room || ""}</div>`;
    dayEl.appendChild(el);
  });
  const rows = Math.max(1, lanes.length);
  dayEl.style.gridTemplateRows = `repeat(${rows}, var(--laneH))`;
}

function render(view){
  const showEven = view === "even";
  document.getElementById('tt-even').classList.toggle('hidden', !showEven);
  document.getElementById('tt-odd').classList.toggle('hidden', showEven);
  const data = showEven ? even : odd;
  const byDay = {1:[],2:[],3:[]};
  data.forEach(ev => byDay[ev.day].push(ev));
  Object.keys(byDay).forEach(k=>{
    const day = Number(k);
    const el = document.getElementById((showEven ? "even" : "odd") + "-day-" + day);
    packAndRender(el, byDay[day]);
  });
}

function bindWeekSwitch(){
  document.querySelectorAll('#rozvrh .segwrap .seg').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      document.querySelectorAll('#rozvrh .segwrap .seg').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      render(btn.dataset.view);
    });
  });
}
window.addEventListener('load', ()=>{ bindWeekSwitch(); render('even'); });
window.addEventListener('resize', ()=>{
  const active = document.querySelector('#rozvrh .segwrap .seg.active')?.dataset.view || 'even';
  render(active);
});


</script>

</body>
</html>

